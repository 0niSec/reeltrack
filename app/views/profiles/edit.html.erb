<%= render "layouts/flash" %>
<div class="container mx-auto mt-10 max-w-3xl">
  <h1 class="text-3xl font-bold text-primary-500 mb-8">Edit Profile</h1>
  <%= form_with model: @profile, url: profile_path(user_id: @profile.user_id), method: :patch, class: "space-y-6" do |f| %>
    <%# Avatar section %>
    <div class="flex items-center space-x-6">
      <%# Current avatar preview %>
      <div class="shrink-0">
        <%= image_tag @profile.avatar_url(size: 128), class: "w-32 h-32 rounded-full" %>
      </div>
      <%# Upload field %>
      <div class="flex-1">
        <%= f.label :avatar, class: "block text-sm font-medium text-primary-500 mb-2" %>
        <%= f.file_field :avatar, accept: "image/png, image/jpeg",
            class: "block w-full text-sm text-primary-400
                   file:mr-4 file:py-2 file:px-4
                   file:rounded-md file:border-0
                   file:text-sm file:font-semibold
                   file:bg-primary-500 file:text-white
                   hover:file:bg-primary-600 hover:file:transition-colors hover:file:duration-300
                   file:cursor-pointer" %>
        <p class="mt-2 text-sm text-primary-400">PNG, JPG up to 5MB</p>
      </div>
    </div>
    <%# Bio %>
    <div>
      <%= f.label :bio, class: "block text-sm font-medium text-primary-500 mb-2" %>
      <%= f.text_area :bio,
          rows: 4,
          placeholder: "Tell us about yourself...",
          class: "block w-full shadow rounded-md border border-neutral-600  focus:outline-none focus:ring-1 focus:ring-primary-600 focus:border-primary-600 bg-primary-800/20 px-3 py-2 mt-2" %>
    </div>
    <%# Favorite Movies %>
    <div>
      <%= f.label :favorite_movies, class: "block text-sm font-medium text-primary-500 mb-2" %>
      <%= f.text_area :favorite_movies,
          placeholder: "Your favorite movies",
          class: "block w-full shadow rounded-md border border-neutral-600  focus:outline-none focus:ring-1 focus:ring-primary-600 focus:border-primary-600 bg-primary-800/20 px-3 py-2 mt-2" %>
    </div>
    <%# Favorite Shows %>
    <div>
      <%= f.label :favorite_shows, class: "block text-sm font-medium text-primary-500 mb-2" %>
      <%= f.text_area :favorite_shows,
          placeholder: "Your favorite TV shows",
          class: "block w-full shadow rounded-md border border-neutral-600  focus:outline-none focus:ring-1 focus:ring-primary-600 focus:border-primary-600 bg-primary-800/20 px-3 py-2 mt-2" %>
    </div>
    <%# Submit and cancel button %>
    <div class="flex justify-end space-x-4 items-center">
      <%= f.submit "Save Changes",
          class: "px-4 py-2 bg-primary-500 text-white rounded-md
                 hover:bg-primary-600 focus:outline-none focus:ring-2
                 focus:ring-primary-500 focus:ring-offset-2
                 focus:ring-offset-neutral-800 transition-colors" %>
      <%= link_to "Cancel", profile_path(user_id: @profile.user_id), class: "text-primary-500 hover:text-primary-600 transition-colors" %>
    </div>
  <% end %>
</div>